{% extends 'base.html' %}

{% block title %}Book Property - RentalSystem{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0"><i class="fas fa-calendar-check"></i> Book Property</h4>
                </div>
                <div class="card-body">
                    <!-- Property Summary -->
                    <div class="property-summary mb-4 p-3 bg-light rounded">
                        <h5>{{ property.title }}</h5>
                        <p class="mb-1"><i class="fas fa-map-marker-alt"></i> {{ property.city }}, {{ property.state }}</p>
                        <p class="mb-1"><strong>Rent: ${{ property.rent_amount }}/month</strong></p>
                        <p class="mb-0">Security Deposit: ${{ property.security_deposit|default:property.rent_amount }}</p>
                    </div>

                    <form method="post">
                        {% csrf_token %}
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Start Date *</label>
                                {{ form.start_date }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">End Date *</label>
                                {{ form.end_date }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Duration (Months) *</label>
                                {{ form.duration_months }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Total Amount</label>
                                <input type="text" class="form-control" value="${{ property.rent_amount }} x Duration" disabled>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Special Requests</label>
                            {{ form.special_requests }}
                        </div>

                        <!-- Booking Summary -->
                        <div class="booking-summary p-3 bg-light rounded mb-4">
                            <h6>Booking Summary</h6>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Monthly Rent:</span>
                                <span>${{ property.rent_amount }}</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Security Deposit:</span>
                                <span>${{ property.security_deposit|default:property.rent_amount }}</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <strong>Total Due Now:</strong>
                                <strong>${{ property.security_deposit|default:property.rent_amount }}</strong>
                            </div>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-calendar-check"></i> Confirm Booking
                            </button>
                            <a href="{% url 'property_detail' property.property_id %}" class="btn btn-secondary btn-lg">
                                <i class="fas fa-arrow-left"></i> Back to Property
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}